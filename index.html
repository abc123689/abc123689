<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>白一叶 - 个人名片</title>
    <style>
        * {margin: 0;padding: 0;box-sizing: border-box;font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", sans-serif;}
        body {background-color: #FFF5F5;min-height: 100vh;padding: 20px;display: flex;flex-direction: column;align-items: center;}
        /* 极简加载，减少渲染耗时 */
        .loading {position: fixed;top:0;left:0;right:0;bottom:0;background: #FFF5F5;display: flex;align-items: center;justify-content: center;z-index: 999;}
        .loading-spinner {width:30px;height:30px;border:3px solid #f3f3f3;border-top:3px solid #1677FF;border-radius:50%;animation:spin 1s linear infinite;}
        @keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
        /* 极速更新按钮 */
        .update-btn {position:fixed;top:20px;left:20px;background:#FF7A00;color:#fff;border:none;padding:6px 12px;border-radius:6px;font-size:12px;cursor:pointer;z-index:998;}
        /* 跨平台容器 */
        .container {width:100%;max-width:500px;margin:0 auto;display:none;}
        /* 名片卡片 */
        .card {background:#fff;padding:40px 20px 32px;border-radius:16px;box-shadow:0 2px 4px rgba(0,0,0,0.03);text-align:center;position:relative;margin-bottom:20px;}
        .debug-btn {position:absolute;top:20px;right:20px;background:#1677FF;color:#fff;font-size:12px;padding:3px 8px;border-radius:4px;}
        .avatar {width:120px;height:120px;border-radius:50%;background:linear-gradient(135deg, #B69CFE, #80C8FF);margin:0 auto 24px;}
        .name {font-size:32px;font-weight:500;color:#000;margin-bottom:12px;}
        .subtitle {font-size:16px;color:#8C8C8C;}
        /* 社交卡片+最小化按钮 */
        .social-card {background:#fff;padding:24px 20px;border-radius:16px;box-shadow:0 2px 4px rgba(0,0,0,0.03);position:relative;}
        .social-title {font-size:20px;font-weight:500;color:#000;text-align:center;margin-bottom:24px;}
        .social-btns {display:grid;grid-template-columns:repeat(2,1fr);gap:10px;}
        /* 按钮极致缩小，不压缩文字 */
        .social-btn {padding:6px 4px;border-radius:8px;text-align:center;color:#fff;font-size:11px;text-decoration:none;line-height:1.2;transition:all 0.1s;}
        .social-btn:hover {opacity:0.9;transform:scale(0.98);}
        /* 平台配色 */
        .facebook {background:#1877F2;}
        .instagram {background:#C13584;}
        .bluesky {background:#007AFF;}
        .tumblr {background:#35465C;}
        .snapchat {background:#FFFC00;color:#000!important;font-weight:500;}
        .quora {background:#B92B27;}
        /* 响应式（极速适配，无冗余代码） */
        @media (max-width:375px) {.social-btns {grid-template-columns:1fr;}}
        @media (min-width:768px) {body {padding:40px 20px;}.card {margin-bottom:30px;}}
    </style>
</head>
<body>
    <div class="loading" id="loading"><div class="loading-spinner"></div></div>
    <button class="update-btn" id="updateBtn">极速更新</button>
    <div class="container" id="mainContainer">
        <div class="card" id="profileCard">
            <div class="debug-btn">调试</div>
            <div class="avatar"></div>
            <div class="name" id="userName">白一叶</div>
            <div class="subtitle" id="userSubtitle">社交账号汇总</div>
        </div>
        <div class="social-card">
            <div class="debug-btn" style="top:16px;">调试</div>
            <div class="social-title">社交平台链接</div>
            <div class="social-btns" id="socialBtnsContainer"></div>
        </div>
    </div>

    <script>
        // 提速核心配置：精简防火墙+多级缓存+极速请求
        const CONFIG = {
            updateApi: 'https://your-domain.com/api/profile-update.json',//你的更新接口
            cacheKey: 'profile_fast_cache',
            cacheExpire: 86400000,//缓存1天，不用重复请求
            allowedOrigins: ['https://your-domain.com','127.0.0.1','localhost'],
            signKey: 'your-secure-key-123',
            defaultData: {
                name: '白一叶',
                subtitle: '社交账号汇总',
                social: [
                    {name:'脸书（Facebook）',url:'https://www.facebook.com/share/1Gc4Ta69nT/',color:'#1877F2'},
                    {name:'Instagram（布鲁斯基）',url:'https://www.instagram.com/douzhiweibo?igsh=ZHcwa3FkcnFvZGt4',color:'#C13584'},
                    {name:'Bluesky',url:'https://bsky.app/profile/baiyiye.bsky.social',color:'#007AFF'},
                    {name:'Tumblr（色拉布）',url:'https://www.tumblr.com/superblegionlegend?source=share',color:'#35465C'},
                    {name:'Snapchat',url:'https://www.snapchat.com/add/baixie2197?share_id=7IOFBKpAfDE&locale=zh-CN',color:'#FFFC00'},
                    {name:'Quora',url:'https://www.quora.com/profile/Fh-Fh-96?ch=10&oid=3144756177&share=90df438d&srid=5x5HtR&target_type=user',color:'#B92B27'}
                ]
            }
        };

        // 提速关键1：精简500层防火墙为4层核心防护，不耗性能
        function fastSecurityCheck(data,sign){
            // L1:来源验证（极简）
            const origin = window.location.origin;
            if(!CONFIG.allowedOrigins.some(o=>origin.includes(o))) throw new Error('非法来源');
            // L2:签名验证（极简算法，提速）
            if(sign && btoa(JSON.stringify(data)+CONFIG.signKey)!==sign) throw new Error('数据篡改');
            // L3:格式校验（仅核心字段，不冗余）
            if(!data.name || !data.social) throw new Error('数据非法');
            // L4:防刷（仅1次校验，不循环）
            if(sessionStorage.getItem('update_lock')) throw new Error('更新频繁');
            return true;
        }

        // 提速关键2：多级缓存（内存+本地存储），优先读缓存，0延迟加载
        function getFastCache(){
            const cache = localStorage.getItem(CONFIG.cacheKey);
            if(!cache) return null;
            const {data,time} = JSON.parse(cache);
            // 缓存未过期直接用
            if(Date.now()-time < CONFIG.cacheExpire) return data;
            localStorage.removeItem(CONFIG.cacheKey);
            return null;
        }

        function setFastCache(data){
            localStorage.setItem(CONFIG.cacheKey,JSON.stringify({data,time:Date.now()}));
        }

        // 提速关键3：极速请求（无冗余头+缓存优先+超时兜底）
        async function fetchFastData(isManualUpdate=false){
            // 手动更新才清缓存，自动加载优先读缓存
            const cacheData = !isManualUpdate ? getFastCache() : null;
            if(cacheData) return cacheData;

            try{
                sessionStorage.setItem('update_lock','1');
                const res = await fetch(CONFIG.updateApi,{
                    method:'GET',
                    headers:{'Content-Type':'application/json'},
                    mode:'cors',
                    cache: isManualUpdate ? 'no-cache' : 'force-cache',//自动加载强缓存
                    timeout:3000//超时3秒兜底
                });
                if(!res.ok) throw new Error('请求失败');
                const {data,sign} = await res.json();
                fastSecurityCheck(data,sign);
                setFastCache(data);
                return data;
            }catch(e){
                console.log('更新失败，用兜底数据:',e.message);
                return getFastCache() || CONFIG.defaultData;
            }finally{
                setTimeout(()=>sessionStorage.removeItem('update_lock'),1000);//1秒后解锁
            }
        }

        // 提速关键4：极简渲染（DOM操作最少，不冗余）
        function renderFast(data){
            document.getElementById('userName').textContent = data.name;
            document.getElementById('userSubtitle').textContent = data.subtitle;
            const container = document.getElementById('socialBtnsContainer');
            container.innerHTML = '';
            data.social.forEach(item=>{
                const btn = document.createElement('a');
                btn.href = item.url;
                btn.target = '_blank';
                btn.className = 'social-btn';
                btn.textContent = item.name;
                btn.style.backgroundColor = item.color;
                if(item.color==='#FFFC00') btn.style.color = '#000';
                container.appendChild(btn);
            });
            // 最快速度显示页面
            document.getElementById('loading').style.display = 'none';
            document.getElementById('mainContainer').style.display = 'block';
        }

        // 初始化（极速加载，无延迟）
        window.onload = async ()=>{
            const data = await fetchFastData();
            renderFast(data);
            // 手动更新：点击秒更，不卡顿
            document.getElementById('updateBtn').addEventListener('click',async ()=>{
                document.getElementById('loading').style.display = 'flex';
                const newData = await fetchFastData(true);
                renderFast(newData);
            });
        };
    </script>
</body>
</html>



